# 数量关系

[视频链接](https://www.bilibili.com/video/BV1SJ4m1e7Kh){target="\_blank"}

## 领域模型的数量关系

- 数量关系也一样很重要，但更关心的是如何产生关系
- 聚合内核聚合间的数量关系的差别

### 聚合内

A到B的一对多关系

```kt
class B
class A(val bList: List<B>)
```

- 导航采用对象引用实现。因为在同一个聚合内，同时载入内存，同时持久化
- 尽量隐藏聚合内部对象的数量关系
  - 通过定义函数，维护数量关系，不要直接把集合暴露出去让外部操作

### 聚合间

```kt
class B(id: Long)
class A(val bList: List<Long>)
```

- 导航采用持有id实现。避免载入A聚合导致载入B聚合。

## 数量关系是本质吗？

- 领域对象之间的数量关系是不变的吗？
  **是有可能随着业务发展改变的**

- 为什么领域对象间存在这样的数量关系？
  **数量关系不是本质，功能才是。数量关系是为了实现功能而特意设计的，从属于功能。当功能变更的时候，数量关系也有可能变化。因此设计领域模型的时候，不从数量关系切入。**
